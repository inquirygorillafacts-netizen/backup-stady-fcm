{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///app/frontend/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, FirebaseApp } from 'firebase/app';\nimport { getAuth, Auth } from 'firebase/auth';\nimport { getDatabase, Database } from 'firebase/database';\nimport { getMessaging, Messaging, isSupported } from 'firebase/messaging';\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || \"demo-api-key\",\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || \"demo-project.firebaseapp.com\",\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || \"demo-project\",\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || \"demo-project.appspot.com\",\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"123456789\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || \"demo-app-id\",\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL || \"https://demo-project-default-rtdb.firebaseio.com\"\n};\n\nlet firebaseApp: FirebaseApp;\nlet auth: Auth;\nlet database: Database;\nlet messaging: Messaging | null = null;\n\nexport function getFirebaseApp(): FirebaseApp {\n  if (!firebaseApp) {\n    firebaseApp = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\n  }\n  return firebaseApp;\n}\n\nexport function getFirebaseAuth(): Auth {\n  if (!auth) {\n    auth = getAuth(getFirebaseApp());\n  }\n  return auth;\n}\n\nexport function getFirebaseDatabase(): Database {\n  if (!database) {\n    database = getDatabase(getFirebaseApp());\n  }\n  return database;\n}\n\n// Export db for backwards compatibility\nexport const db = getFirebaseDatabase();\nexport const firestore = getFirebaseDatabase();\n\nexport async function getFirebaseMessaging(): Promise<Messaging | null> {\n  if (typeof window === 'undefined') return null;\n  \n  try {\n    const supported = await isSupported();\n    if (supported && !messaging) {\n      messaging = getMessaging(getFirebaseApp());\n    }\n    return messaging;\n  } catch (error) {\n    console.error('Firebase messaging not supported:', error);\n    return null;\n  }\n}\n\nexport { firebaseConfig };"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ,oDAA4C;IACpD,YAAY,oEAAgD;IAC5D,WAAW,oDAA+C;IAC1D,eAAe,gEAAmD;IAClE,mBAAmB,iDAAwD;IAC3E,OAAO,mDAA2C;IAClD,aAAa,wFAAiD;AAChE;AAEA,IAAI;AACJ,IAAI;AACJ,IAAI;AACJ,IAAI,YAA8B;AAE3B,SAAS;IACd,IAAI,CAAC,aAAa;QAChB,cAAc,IAAA,uLAAO,IAAG,MAAM,KAAK,IAAI,IAAA,6LAAa,EAAC,kBAAkB,IAAA,uLAAO,GAAE,CAAC,EAAE;IACrF;IACA,OAAO;AACT;AAEO,SAAS;IACd,IAAI,CAAC,MAAM;QACT,OAAO,IAAA,yLAAO,EAAC;IACjB;IACA,OAAO;AACT;AAEO,SAAS;IACd,IAAI,CAAC,UAAU;QACb,WAAW,IAAA,gNAAW,EAAC;IACzB;IACA,OAAO;AACT;AAGO,MAAM,KAAK;AACX,MAAM,YAAY;AAElB,eAAe;IACpB,wCAAmC,OAAO;;;AAY5C"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///app/frontend/src/app/student/ai/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { \n  Send, \n  Image as ImageIcon,\n  Camera,\n  Plus,\n  Mic,\n  MicOff,\n  Sparkles,\n  ChevronDown,\n  History,\n  Bot,\n  User as UserIcon,\n  Trash2,\n  Copy,\n  RotateCw,\n  Zap,\n  Brain,\n  Edit,\n  X,\n  Check,\n  Heart,\n  Volume2,\n  Clock,\n  MessageSquare,\n  FileText,\n  Workflow,\n  Settings\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { getFirebaseDatabase } from '@/lib/firebase';\nimport { ref, set, get, update } from 'firebase/database';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n  liked?: boolean;\n}\n\ninterface Chat {\n  id: string;\n  title: string;\n  messages: Message[];\n  created_at: string;\n}\n\ninterface CustomAIModel {\n  id: string;\n  name: string;\n  purpose: string;\n  instructions: string;\n  sources: string[];\n  created_at: string;\n}\n\ninterface UserBiography {\n  name: string;\n  work: string;\n  likes: string[];\n  dislikes: string[];\n  goals: string[];\n  dreams: string[];\n  relationships: { [key: string]: string };\n  habits: string[];\n  sorrows: string[];\n  lastUpdated: string;\n}\n\ntype AIMode = 'chat' | 'image-gen' | 'deep-research' | 'pdf-gen';\n\nexport default function AIPage() {\n  const { userData } = useAuth();\n  const [chats, setChats] = useState<Chat[]>([]);\n  const [currentChat, setCurrentChat] = useState<Chat | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const [showCustomModels, setShowCustomModels] = useState(false);\n  const [showModeDropdown, setShowModeDropdown] = useState(false);\n  const [showFileOptions, setShowFileOptions] = useState(false);\n  const [selectedMode, setSelectedMode] = useState<AIMode>('chat');\n  const [isVoiceMode, setIsVoiceMode] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [customModels, setCustomModels] = useState<CustomAIModel[]>([]);\n  const [selectedModel, setSelectedModel] = useState<string | null>(null);\n  const [userBiography, setUserBiography] = useState<UserBiography | null>(null);\n  const [editingChatId, setEditingChatId] = useState<string | null>(null);\n  const [editingTitle, setEditingTitle] = useState('');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    fetchChats();\n    loadCustomModels();\n    loadUserBiography();\n  }, [userData]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const loadUserBiography = async () => {\n    if (!userData?.id) return;\n    \n    try {\n      const db = getFirebaseDatabase();\n      const bioRef = ref(db, `users/${userData.id}/biography`);\n      const snapshot = await get(bioRef);\n      \n      if (snapshot.exists()) {\n        setUserBiography(snapshot.val());\n      } else {\n        // Create initial biography\n        const initialBio: UserBiography = {\n          name: userData.name || '',\n          work: '',\n          likes: [],\n          dislikes: [],\n          goals: [],\n          dreams: [],\n          relationships: {},\n          habits: [],\n          sorrows: [],\n          lastUpdated: new Date().toISOString()\n        };\n        await set(bioRef, initialBio);\n        setUserBiography(initialBio);\n      }\n    } catch (error) {\n      console.error('Error loading biography:', error);\n      // Fallback to localStorage\n      const stored = localStorage.getItem('userBiography');\n      if (stored) {\n        setUserBiography(JSON.parse(stored));\n      }\n    }\n  };\n\n  const updateUserBiography = async (updates: Partial<UserBiography>) => {\n    if (!userData?.id) return;\n\n    const updatedBio = {\n      ...userBiography,\n      ...updates,\n      lastUpdated: new Date().toISOString()\n    } as UserBiography;\n\n    try {\n      const db = getFirebaseDatabase();\n      const bioRef = ref(db, `users/${userData.id}/biography`);\n      await update(bioRef, updatedBio);\n      setUserBiography(updatedBio);\n    } catch (error) {\n      console.error('Error updating biography:', error);\n      // Fallback to localStorage\n      localStorage.setItem('userBiography', JSON.stringify(updatedBio));\n      setUserBiography(updatedBio);\n    }\n  };\n\n  const fetchChats = () => {\n    const stored = localStorage.getItem('aiChats');\n    if (stored) {\n      setChats(JSON.parse(stored));\n    }\n  };\n\n  const loadCustomModels = () => {\n    const stored = localStorage.getItem('customAIModels');\n    if (stored) {\n      setCustomModels(JSON.parse(stored));\n    }\n  };\n\n  const createNewChat = () => {\n    const newChat: Chat = {\n      id: Date.now().toString(),\n      title: '‡§®‡§à ‡§¨‡§æ‡§§‡§ö‡•Ä‡§§',\n      messages: [],\n      created_at: new Date().toISOString()\n    };\n    const updatedChats = [newChat, ...chats];\n    setChats(updatedChats);\n    setCurrentChat(newChat);\n    setMessages([]);\n    localStorage.setItem('aiChats', JSON.stringify(updatedChats));\n  };\n\n  const handleRenameChat = (chatId: string, newTitle: string) => {\n    const updatedChats = chats.map(c => \n      c.id === chatId ? { ...c, title: newTitle } : c\n    );\n    setChats(updatedChats);\n    localStorage.setItem('aiChats', JSON.stringify(updatedChats));\n    setEditingChatId(null);\n    toast.success('‡§ö‡•à‡§ü ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¨‡§¶‡§≤ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ');\n  };\n\n  const handleDeleteChat = (chatId: string) => {\n    const updatedChats = chats.filter(c => c.id !== chatId);\n    setChats(updatedChats);\n    localStorage.setItem('aiChats', JSON.stringify(updatedChats));\n    if (currentChat?.id === chatId) {\n      setCurrentChat(null);\n      setMessages([]);\n    }\n    toast.success('‡§ö‡•à‡§ü ‡§°‡§ø‡§≤‡•Ä‡§ü ‡§π‡•ã ‡§ó‡§à');\n  };\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n\n    if (!currentChat) {\n      createNewChat();\n      setTimeout(() => handleSend(), 100);\n      return;\n    }\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: input,\n      timestamp: new Date()\n    };\n\n    const updatedMessages = [...messages, userMessage];\n    setMessages(updatedMessages);\n    setInput('');\n    setLoading(true);\n\n    // Extract biography information from conversation\n    extractBiographyInfo(input);\n\n    // Simulate AI response\n    setTimeout(() => {\n      const aiMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: getDemoResponse(selectedMode),\n        timestamp: new Date()\n      };\n      const finalMessages = [...updatedMessages, aiMessage];\n      setMessages(finalMessages);\n      \n      // Auto-generate title for first message\n      if (finalMessages.length === 2) {\n        const title = input.slice(0, 50) + (input.length > 50 ? '...' : '');\n        const updatedChat = { ...currentChat, title, messages: finalMessages };\n        setCurrentChat(updatedChat);\n        const updatedChats = chats.map(c => c.id === currentChat.id ? updatedChat : c);\n        setChats(updatedChats);\n        localStorage.setItem('aiChats', JSON.stringify(updatedChats));\n      } else {\n        // Update chat\n        const updatedChat = { ...currentChat, messages: finalMessages };\n        setCurrentChat(updatedChat);\n        const updatedChats = chats.map(c => c.id === currentChat.id ? updatedChat : c);\n        setChats(updatedChats);\n        localStorage.setItem('aiChats', JSON.stringify(updatedChats));\n      }\n      \n      setLoading(false);\n    }, 1500);\n  };\n\n  const extractBiographyInfo = (message: string) => {\n    const lowerMsg = message.toLowerCase();\n    \n    // Extract name\n    if (lowerMsg.includes('my name is') || lowerMsg.includes('‡§Æ‡•á‡§∞‡§æ ‡§®‡§æ‡§Æ')) {\n      const nameMatch = message.match(/(?:my name is|‡§Æ‡•á‡§∞‡§æ ‡§®‡§æ‡§Æ|‡§Æ‡•á‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§π‡•à) (\\w+)/i);\n      if (nameMatch) {\n        updateUserBiography({ name: nameMatch[1] });\n      }\n    }\n\n    // Extract work\n    if (lowerMsg.includes('i work') || lowerMsg.includes('‡§Æ‡•à‡§Ç ‡§ï‡§æ‡§Æ') || lowerMsg.includes('‡§Æ‡•á‡§∞‡§æ ‡§ï‡§æ‡§Æ')) {\n      const workMatch = message.match(/(?:i work as|i am a|‡§Æ‡•à‡§Ç|‡§Æ‡•á‡§∞‡§æ ‡§ï‡§æ‡§Æ) (.+?)(?:\\.|$)/i);\n      if (workMatch) {\n        updateUserBiography({ work: workMatch[1] });\n      }\n    }\n\n    // Extract likes\n    if (lowerMsg.includes('i like') || lowerMsg.includes('‡§Æ‡•Å‡§ù‡•á ‡§™‡§∏‡§Ç‡§¶') || lowerMsg.includes('‡§™‡§∏‡§Ç‡§¶ ‡§π‡•à')) {\n      const likes = userBiography?.likes || [];\n      const newLike = message.match(/(?:i like|‡§Æ‡•Å‡§ù‡•á ‡§™‡§∏‡§Ç‡§¶ ‡§π‡•à|‡§™‡§∏‡§Ç‡§¶ ‡§π‡•à) (.+?)(?:\\.|$)/i)?.[1];\n      if (newLike && !likes.includes(newLike)) {\n        updateUserBiography({ likes: [...likes, newLike] });\n      }\n    }\n\n    // Extract dislikes\n    if (lowerMsg.includes('i don\\'t like') || lowerMsg.includes('‡§Æ‡•Å‡§ù‡•á ‡§®‡§π‡•Ä‡§Ç ‡§™‡§∏‡§Ç‡§¶') || lowerMsg.includes('‡§®‡§æ‡§™‡§∏‡§Ç‡§¶')) {\n      const dislikes = userBiography?.dislikes || [];\n      const newDislike = message.match(/(?:i don't like|‡§Æ‡•Å‡§ù‡•á ‡§®‡§π‡•Ä‡§Ç ‡§™‡§∏‡§Ç‡§¶|‡§®‡§æ‡§™‡§∏‡§Ç‡§¶) (.+?)(?:\\.|$)/i)?.[1];\n      if (newDislike && !dislikes.includes(newDislike)) {\n        updateUserBiography({ dislikes: [...dislikes, newDislike] });\n      }\n    }\n\n    // Extract goals\n    if (lowerMsg.includes('my goal') || lowerMsg.includes('‡§Æ‡•á‡§∞‡§æ ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø') || lowerMsg.includes('‡§Æ‡•á‡§∞‡§æ ‡§∏‡§™‡§®‡§æ')) {\n      const goals = userBiography?.goals || [];\n      const newGoal = message.match(/(?:my goal|‡§Æ‡•á‡§∞‡§æ ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø|‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø|goal) (.+?)(?:\\.|$)/i)?.[1];\n      if (newGoal && !goals.includes(newGoal)) {\n        updateUserBiography({ goals: [...goals, newGoal] });\n      }\n    }\n\n    // Extract dreams\n    if (lowerMsg.includes('dream') || lowerMsg.includes('‡§∏‡§™‡§®‡§æ')) {\n      const dreams = userBiography?.dreams || [];\n      const newDream = message.match(/(?:dream|‡§∏‡§™‡§®‡§æ) (.+?)(?:\\.|$)/i)?.[1];\n      if (newDream && !dreams.includes(newDream)) {\n        updateUserBiography({ dreams: [...dreams, newDream] });\n      }\n    }\n\n    // Extract relationship info (girlfriend, boyfriend)\n    if (lowerMsg.includes('girlfriend') || lowerMsg.includes('boyfriend') || lowerMsg.includes('gf') || lowerMsg.includes('bf')) {\n      const relationships = userBiography?.relationships || {};\n      if (lowerMsg.includes('girlfriend') || lowerMsg.includes('gf')) {\n        const gfMatch = message.match(/(?:girlfriend|gf)(?: is| ‡§ï‡§æ ‡§®‡§æ‡§Æ)? (\\w+)/i);\n        if (gfMatch) {\n          relationships.girlfriend = gfMatch[1];\n        } else {\n          relationships.girlfriend = 'yes';\n        }\n      }\n      if (lowerMsg.includes('boyfriend') || lowerMsg.includes('bf')) {\n        const bfMatch = message.match(/(?:boyfriend|bf)(?: is| ‡§ï‡§æ ‡§®‡§æ‡§Æ)? (\\w+)/i);\n        if (bfMatch) {\n          relationships.boyfriend = bfMatch[1];\n        } else {\n          relationships.boyfriend = 'yes';\n        }\n      }\n      updateUserBiography({ relationships });\n    }\n\n    // Extract habits\n    if (lowerMsg.includes('habit') || lowerMsg.includes('‡§Ü‡§¶‡§§')) {\n      const habits = userBiography?.habits || [];\n      const newHabit = message.match(/(?:habit|‡§Ü‡§¶‡§§) (.+?)(?:\\.|$)/i)?.[1];\n      if (newHabit && !habits.includes(newHabit)) {\n        updateUserBiography({ habits: [...habits, newHabit] });\n      }\n    }\n\n    // Extract sorrows/problems\n    if (lowerMsg.includes('sad') || lowerMsg.includes('‡§¶‡•Å‡§ñ') || lowerMsg.includes('problem') || lowerMsg.includes('‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ')) {\n      const sorrows = userBiography?.sorrows || [];\n      const newSorrow = message.match(/(?:sad|‡§¶‡•Å‡§ñ|problem|‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ) (.+?)(?:\\.|$)/i)?.[1];\n      if (newSorrow && !sorrows.includes(newSorrow)) {\n        updateUserBiography({ sorrows: [...sorrows, newSorrow] });\n      }\n    }\n  };\n\n  const getDemoResponse = (mode: AIMode) => {\n    const userName = userBiography?.name || userData?.name || '‡§¶‡•ã‡§∏‡•ç‡§§';\n    \n    switch (mode) {\n      case 'image-gen':\n        return `‡§®‡§Æ‡§∏‡•ç‡§§‡•á ${userName}! üé® ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á description ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ image ‡§¨‡§®‡§æ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç‡•§ ‡§Ø‡§π feature Google Gemini Nano Banana integration ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§`;\n      case 'deep-research':\n        return `${userName}, ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á topic ‡§™‡§∞ ‡§ó‡§π‡§® research ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç... üîç Multiple sources ‡§∏‡•á data collect ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç‡•§ Integration ‡§ï‡•á ‡§¨‡§æ‡§¶ comprehensive analysis provide ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ‡•§`;\n      case 'pdf-gen':\n        return `${userName}, ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è PDF document ‡§¨‡§®‡§æ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç... üìÑ ‡§Ø‡§π feature integration ‡§ï‡•á ‡§¨‡§æ‡§¶ available ‡§π‡•ã‡§ó‡§æ‡•§`;\n      default:\n        let response = `‡§®‡§Æ‡§∏‡•ç‡§§‡•á ${userName}! üëã ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Ç‡•§`;\n        \n        if (userBiography?.goals && userBiography.goals.length > 0) {\n          response += `\\n\\n‡§Æ‡•Å‡§ù‡•á ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§Ø‡§æ‡§¶ ‡§π‡•à‡§Ç: ${userBiography.goals.join(', ')}‡•§ ‡§Æ‡•à‡§Ç ‡§á‡§®‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ!`;\n        }\n        \n        if (userBiography?.likes && userBiography.likes.length > 0) {\n          response += `\\n\\n‡§Æ‡•Å‡§ù‡•á ‡§™‡§§‡§æ ‡§π‡•à ‡§Ü‡§™‡§ï‡•ã ${userBiography.likes[0]} ‡§™‡§∏‡§Ç‡§¶ ‡§π‡•à‡•§`;\n        }\n        \n        response += `\\n\\n‡§Ø‡§π ‡§è‡§ï demo response ‡§π‡•à‡•§ Firebase ‡§î‡§∞ Google AI integration ‡§ï‡•á ‡§¨‡§æ‡§¶, ‡§Æ‡•à‡§Ç ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§™‡•Ç‡§∞‡•Ä conversation ‡§Ø‡§æ‡§¶ ‡§∞‡§ñ‡•Ç‡§Ç‡§ó‡§æ ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡•ã ‡§≠‡•Ä ‡§ú‡§æ‡§®‡§§‡§æ ‡§π‡•Ç‡§Ç, ‡§â‡§∏‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ personalized responses ‡§¶‡•Ç‡§Ç‡§ó‡§æ‡•§`;\n        \n        return response;\n    }\n  };\n\n  const handleLikeMessage = (messageId: string) => {\n    const updatedMessages = messages.map(msg =>\n      msg.id === messageId ? { ...msg, liked: !msg.liked } : msg\n    );\n    setMessages(updatedMessages);\n\n    // Save liked messages\n    const likedMessages = updatedMessages.filter(m => m.liked && m.role === 'assistant');\n    localStorage.setItem('likedAIMessages', JSON.stringify(likedMessages));\n\n    // Update chat\n    if (currentChat) {\n      const updatedChat = { ...currentChat, messages: updatedMessages };\n      const updatedChats = chats.map(c => c.id === currentChat.id ? updatedChat : c);\n      setChats(updatedChats);\n      localStorage.setItem('aiChats', JSON.stringify(updatedChats));\n    }\n\n    toast.success(updatedMessages.find(m => m.id === messageId)?.liked ? 'Liked ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ' : 'Liked ‡§∏‡•á ‡§π‡§ü‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ');\n  };\n\n  const handleCopy = (content: string) => {\n    navigator.clipboard.writeText(content);\n    toast.success('‡§ï‡•â‡§™‡•Ä ‡§π‡•ã ‡§ó‡§Ø‡§æ!');\n  };\n\n  const handleRegenerate = async () => {\n    if (messages.length === 0) return;\n    \n    const lastUserMessage = messages.filter(m => m.role === 'user').pop();\n    if (!lastUserMessage) return;\n\n    const messagesWithoutLastAI = messages.slice(0, -1);\n    setMessages(messagesWithoutLastAI);\n    setLoading(true);\n\n    setTimeout(() => {\n      const aiMessage: Message = {\n        id: Date.now().toString(),\n        role: 'assistant',\n        content: getDemoResponse(selectedMode) + '\\n\\n(‡§™‡•Å‡§®‡§É ‡§ú‡§®‡§∞‡•á‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ)',\n        timestamp: new Date()\n      };\n      const finalMessages = [...messagesWithoutLastAI, aiMessage];\n      setMessages(finalMessages);\n      \n      // Update chat\n      if (currentChat) {\n        const updatedChat = { ...currentChat, messages: finalMessages };\n        const updatedChats = chats.map(c => c.id === currentChat.id ? updatedChat : c);\n        setChats(updatedChats);\n        localStorage.setItem('aiChats', JSON.stringify(updatedChats));\n      }\n      \n      setLoading(false);\n    }, 1500);\n  };\n\n  const handleVoiceMode = () => {\n    setIsVoiceMode(!isVoiceMode);\n    if (!isVoiceMode) {\n      toast.info('Voice mode ‡§ö‡§æ‡§≤‡•Ç ‡§π‡•ã ‡§ó‡§Ø‡§æ üé§');\n    } else {\n      toast.info('Text mode ‡§Æ‡•á‡§Ç ‡§µ‡§æ‡§™‡§∏ ‡§Ü ‡§ó‡§è');\n      setIsRecording(false);\n    }\n  };\n\n  const handleToggleRecording = () => {\n    setIsRecording(!isRecording);\n    if (!isRecording) {\n      toast.info('Recording ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§ó‡§à... (Feature integration pending)');\n    } else {\n      toast.info('Recording ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§à');\n    }\n  };\n\n  const handleFileUpload = (type: 'camera' | 'gallery') => {\n    toast.info(`${type === 'camera' ? 'Camera' : 'Gallery'} feature Firebase Storage integration ‡§ï‡•á ‡§¨‡§æ‡§¶ available ‡§π‡•ã‡§ó‡§æ`);\n    setShowFileOptions(false);\n  };\n\n  const AI_MODES = [\n    { id: 'chat', label: 'Chat', icon: MessageSquare },\n    { id: 'image-gen', label: 'Image Generator', icon: ImageIcon },\n    { id: 'deep-research', label: 'Deep Research', icon: Zap },\n    { id: 'pdf-gen', label: 'PDF Generator', icon: FileText },\n  ];\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950\" data-testid=\"ai-page\">\n      {/* Modern Glassmorphism Header */}\n      <div className=\"backdrop-blur-xl bg-white/70 dark:bg-gray-900/70 border-b border-gray-200/50 dark:border-gray-700/50 px-4 py-3 shadow-sm sticky top-0 z-10\">\n        <div className=\"flex items-center justify-between max-w-5xl mx-auto\">\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={() => setShowHistory(true)}\n              className=\"p-2 rounded-xl hover:bg-gray-100/80 dark:hover:bg-gray-800/80 transition-all hover:scale-105\"\n              data-testid=\"history-button\"\n            >\n              <History className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n            </button>\n            <div>\n              <h1 className=\"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2\">\n                <div className=\"w-8 h-8 rounded-xl bg-gradient-to-br from-purple-500 via-pink-500 to-orange-500 flex items-center justify-center shadow-lg\">\n                  <Brain className=\"w-4 h-4 text-white\" />\n                </div>\n                {selectedModel \n                  ? customModels.find(m => m.id === selectedModel)?.name \n                  : 'AI Assistant'}\n              </h1>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => setShowCustomModels(true)}\n              className=\"p-2 rounded-xl hover:bg-gray-100/80 dark:hover:bg-gray-800/80 transition-all hover:scale-105\"\n              title=\"Custom Models\"\n              data-testid=\"custom-models-button\"\n            >\n              <Workflow className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n            </button>\n            <button\n              onClick={() => setShowSettings(true)}\n              className=\"p-2 rounded-xl hover:bg-gray-100/80 dark:hover:bg-gray-800/80 transition-all hover:scale-105\"\n              data-testid=\"settings-button\"\n            >\n              <Settings className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Messages Area with Smooth Scrolling */}\n      <div className=\"flex-1 overflow-y-auto relative z-0\" data-testid=\"messages-container\">\n        <div className=\"max-w-3xl mx-auto px-4 py-6 space-y-6\">\n          {messages.length === 0 ? (\n            <div className=\"flex items-center justify-center h-full\">\n              <div className=\"text-center space-y-6 py-12 animate-fade-in\">\n                <div className=\"relative w-24 h-24 mx-auto\">\n                  <div className=\"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl blur-2xl opacity-50 animate-pulse\" />\n                  <div className=\"relative w-24 h-24 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl flex items-center justify-center shadow-2xl\">\n                    <Bot className=\"w-12 h-12 text-white\" />\n                  </div>\n                </div>\n                <div>\n                  <h2 className=\"text-4xl font-bold bg-gradient-to-r from-gray-900 via-purple-900 to-gray-900 dark:from-white dark:via-purple-200 dark:to-white bg-clip-text text-transparent mb-2\">\n                    ‡§®‡§Æ‡§∏‡•ç‡§§‡•á {userData?.name || '‡§¶‡•ã‡§∏‡•ç‡§§'}! üëã\n                  </h2>\n                  <p className=\"text-gray-600 dark:text-gray-400 text-lg\">\n                    ‡§Ü‡§ú ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç?\n                  </p>\n                </div>\n                <div className=\"grid grid-cols-2 gap-3 max-w-md mx-auto\">\n                  {[\n                    { icon: Sparkles, text: 'Ideas Generate ‡§ï‡§∞‡•á‡§Ç', color: 'from-yellow-400 to-orange-500' },\n                    { icon: Brain, text: 'Deep Research', color: 'from-blue-500 to-cyan-500' },\n                    { icon: ImageIcon, text: 'Images ‡§¨‡§®‡§æ‡§è‡§Ç', color: 'from-pink-500 to-purple-500' },\n                    { icon: Zap, text: 'Quick Answers', color: 'from-green-500 to-emerald-500' }\n                  ].map((item, idx) => (\n                    <button\n                      key={idx}\n                      onClick={() => setInput(item.text)}\n                      className={`p-4 bg-gradient-to-br ${item.color} text-white rounded-2xl shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-200`}\n                      data-testid={`quick-action-${idx}`}\n                    >\n                      <item.icon className=\"w-6 h-6 mb-2 mx-auto\" />\n                      <p className=\"text-sm font-medium\">{item.text}</p>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ) : (\n            <>\n              {messages.map((message, index) => (\n                <div\n                  key={message.id}\n                  className={`flex gap-3 ${\n                    message.role === 'user' ? 'justify-end' : 'justify-start'\n                  } group animate-slide-up`}\n                  data-testid={`message-${message.id}`}\n                >\n                  {message.role === 'assistant' && (\n                    <div className=\"w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 via-purple-600 to-pink-600 flex items-center justify-center flex-shrink-0 shadow-lg\">\n                      <Bot className=\"w-5 h-5 text-white\" />\n                    </div>\n                  )}\n                  <div className=\"flex flex-col max-w-[85%]\">\n                    <div\n                      className={`px-5 py-3 rounded-2xl shadow-md ${\n                        message.role === 'user'\n                          ? 'bg-gradient-to-br from-blue-600 to-blue-700 text-white'\n                          : 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700'\n                      }`}\n                    >\n                      <p className=\"whitespace-pre-wrap break-words leading-relaxed\">{message.content}</p>\n                    </div>\n                    \n                    {/* Message Actions */}\n                    <div className={`flex items-center gap-1 mt-2 opacity-0 group-hover:opacity-100 transition-opacity ${\n                      message.role === 'user' ? 'justify-end' : 'justify-start'\n                    }`}>\n                      <button\n                        onClick={() => handleCopy(message.content)}\n                        className=\"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-all hover:scale-110\"\n                        title=\"Copy\"\n                        data-testid={`copy-message-${message.id}`}\n                      >\n                        <Copy className=\"w-4 h-4 text-gray-600 dark:text-gray-400\" />\n                      </button>\n                      {message.role === 'assistant' && (\n                        <>\n                          <button\n                            onClick={() => handleLikeMessage(message.id)}\n                            className=\"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-all hover:scale-110\"\n                            title=\"Like\"\n                            data-testid={`like-message-${message.id}`}\n                          >\n                            <Heart className={`w-4 h-4 transition-all ${\n                              message.liked \n                                ? 'fill-red-500 text-red-500' \n                                : 'text-gray-600 dark:text-gray-400'\n                            }`} />\n                          </button>\n                          {index === messages.length - 1 && (\n                            <button\n                              onClick={handleRegenerate}\n                              className=\"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-all hover:scale-110\"\n                              title=\"Regenerate\"\n                              data-testid=\"regenerate-button\"\n                            >\n                              <RotateCw className=\"w-4 h-4 text-gray-600 dark:text-gray-400\" />\n                            </button>\n                          )}\n                        </>\n                      )}\n                      <span className=\"text-xs text-gray-500 dark:text-gray-400 ml-2\">\n                        {new Date(message.timestamp).toLocaleTimeString('hi-IN', { \n                          hour: '2-digit', \n                          minute: '2-digit' \n                        })}\n                      </span>\n                    </div>\n                  </div>\n                  {message.role === 'user' && (\n                    <div className=\"w-8 h-8 rounded-xl bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center flex-shrink-0 shadow-lg\">\n                      <UserIcon className=\"w-5 h-5 text-white\" />\n                    </div>\n                  )}\n                </div>\n              ))}\n              {loading && (\n                <div className=\"flex gap-3 animate-slide-up\">\n                  <div className=\"w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 via-purple-600 to-pink-600 flex items-center justify-center shadow-lg\">\n                    <Bot className=\"w-5 h-5 text-white\" />\n                  </div>\n                  <div className=\"bg-white dark:bg-gray-800 px-5 py-3 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md\">\n                    <div className=\"flex gap-2\">\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" />\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }} />\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.4s' }} />\n                    </div>\n                  </div>\n                </div>\n              )}\n              <div ref={messagesEndRef} />\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Modern ChatGPT-like Input Area */}\n      <div className=\"backdrop-blur-xl bg-white/70 dark:bg-gray-900/70 border-t border-gray-200/50 dark:border-gray-700/50 px-4 py-4 sticky bottom-0 z-20\">\n        <div className=\"max-w-3xl mx-auto\">\n          <div className=\"flex items-end gap-2\">\n            {/* Main Input Container with Embedded Controls */}\n            <div className=\"flex-1 relative\">\n              <div className=\"bg-white dark:bg-gray-800 rounded-3xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden transition-all hover:shadow-xl\">\n                <div className=\"flex items-center gap-2 px-4 py-3\">\n                  {/* Mode Dropdown Button */}\n                  <div className=\"relative\">\n                    <button\n                      onClick={() => setShowModeDropdown(!showModeDropdown)}\n                      className=\"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-all hover:scale-105\"\n                      data-testid=\"mode-dropdown-button\"\n                    >\n                      {(() => {\n                        const ModeIcon = AI_MODES.find(m => m.id === selectedMode)?.icon || Sparkles;\n                        return <ModeIcon className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />;\n                      })()}\n                    </button>\n\n                    {/* Mode Dropdown */}\n                    {showModeDropdown && (\n                      <div className=\"absolute bottom-full left-0 mb-2 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-2 min-w-[220px] z-50 animate-slide-up\" data-testid=\"mode-dropdown\">\n                        {AI_MODES.map((mode) => {\n                          const Icon = mode.icon;\n                          return (\n                            <button\n                              key={mode.id}\n                              onClick={() => {\n                                setSelectedMode(mode.id as AIMode);\n                                setShowModeDropdown(false);\n                                toast.success(`${mode.label} mode ‡§ö‡•Å‡§®‡§æ ‡§ó‡§Ø‡§æ`);\n                              }}\n                              className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${\n                                selectedMode === mode.id\n                                  ? 'bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 scale-105'\n                                  : 'hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300'\n                              }`}\n                              data-testid={`mode-option-${mode.id}`}\n                            >\n                              <Icon className=\"w-5 h-5\" />\n                              <span className=\"font-medium\">{mode.label}</span>\n                              {selectedMode === mode.id && <Check className=\"w-4 h-4 ml-auto\" />}\n                            </button>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* File Upload Button */}\n                  <div className=\"relative\">\n                    <button\n                      onClick={() => setShowFileOptions(!showFileOptions)}\n                      className=\"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-all hover:scale-105\"\n                      data-testid=\"file-upload-button\"\n                    >\n                      <Plus className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n                    </button>\n\n                    {/* File Options Dropdown */}\n                    {showFileOptions && (\n                      <div className=\"absolute bottom-full left-0 mb-2 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-2 min-w-[200px] z-50 animate-slide-up\" data-testid=\"file-options-dropdown\">\n                        <button\n                          onClick={() => handleFileUpload('camera')}\n                          className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-all\"\n                          data-testid=\"camera-option\"\n                        >\n                          <Camera className=\"w-5 h-5\" />\n                          <span className=\"font-medium\">‡§´‡•ã‡§ü‡•ã ‡§≤‡•á‡§Ç</span>\n                        </button>\n                        <button\n                          onClick={() => handleFileUpload('gallery')}\n                          className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-all\"\n                          data-testid=\"gallery-option\"\n                        >\n                          <ImageIcon className=\"w-5 h-5\" />\n                          <span className=\"font-medium\">Gallery ‡§∏‡•á ‡§ö‡•Å‡§®‡•á‡§Ç</span>\n                        </button>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Input Field */}\n                  <input\n                    type=\"text\"\n                    value={input}\n                    onChange={(e) => setInput(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && !e.shiftKey && handleSend()}\n                    placeholder={\n                      selectedMode === 'image-gen' \n                        ? 'Image ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡•á‡§Ç...'\n                        : selectedMode === 'deep-research'\n                        ? '‡§ï‡§ø‡§∏ topic ‡§™‡§∞ research ‡§ï‡§∞‡•á‡§Ç?'\n                        : 'AI ‡§ï‡•ã message ‡§≠‡•á‡§ú‡•á‡§Ç...'\n                    }\n                    className=\"flex-1 bg-transparent border-none focus:outline-none text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 text-base\"\n                    data-testid=\"message-input\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Voice Mode Button */}\n            <button\n              onClick={handleVoiceMode}\n              className={`p-4 rounded-full transition-all shadow-lg hover:shadow-xl hover:scale-105 ${\n                isVoiceMode\n                  ? 'bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 text-white'\n                  : 'bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700'\n              }`}\n              title=\"Voice Mode\"\n              data-testid=\"voice-mode-button\"\n            >\n              <Mic className=\"w-5 h-5\" />\n            </button>\n\n            {/* Send Button */}\n            <button\n              onClick={handleSend}\n              disabled={!input.trim() || loading}\n              className=\"p-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl hover:scale-105 disabled:hover:scale-100\"\n              data-testid=\"send-button\"\n            >\n              <Send className=\"w-5 h-5\" />\n            </button>\n          </div>\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 text-center mt-2\">\n            AI ‡§∏‡•á mistakes ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ Important ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä verify ‡§ï‡§∞‡•á‡§Ç‡•§\n          </p>\n        </div>\n      </div>\n\n      {/* Voice Mode Slide Up Panel */}\n      {isVoiceMode && (\n        <div className=\"fixed inset-0 z-50 bg-black/50 backdrop-blur-md flex items-end\" onClick={handleVoiceMode} data-testid=\"voice-mode-panel\">\n          <div \n            className=\"w-full bg-gradient-to-br from-purple-600 via-pink-600 to-orange-600 rounded-t-3xl p-8 animate-slide-up shadow-2xl\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <button\n              onClick={handleVoiceMode}\n              className=\"absolute top-4 right-4 p-2 rounded-full bg-white/20 hover:bg-white/30 transition-all backdrop-blur-sm\"\n              data-testid=\"close-voice-mode\"\n            >\n              <X className=\"w-6 h-6 text-white\" />\n            </button>\n\n            <div className=\"text-center space-y-6\">\n              <div className=\"relative w-32 h-32 mx-auto\">\n                {/* Animated Voice Circles */}\n                <div className={`absolute inset-0 rounded-full bg-white/20 ${isRecording ? 'animate-ping' : ''}`} />\n                <div className={`absolute inset-4 rounded-full bg-white/30 ${isRecording ? 'animate-pulse' : ''}`} />\n                <div className=\"absolute inset-8 rounded-full bg-white flex items-center justify-center shadow-2xl\">\n                  {isRecording ? (\n                    <Volume2 className=\"w-12 h-12 text-purple-600 animate-pulse\" />\n                  ) : (\n                    <Mic className=\"w-12 h-12 text-purple-600\" />\n                  )}\n                </div>\n              </div>\n\n              <div>\n                <h3 className=\"text-3xl font-bold text-white mb-2\">\n                  {isRecording ? '‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç...' : 'Voice Mode'}\n                </h3>\n                <p className=\"text-white/90 text-lg\">\n                  {isRecording ? '‡§Ö‡§¨ ‡§¨‡•ã‡§≤‡•á‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç‡•§' : 'Voice conversation ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è tap ‡§ï‡§∞‡•á‡§Ç'}\n                </p>\n              </div>\n\n              <button\n                onClick={handleToggleRecording}\n                className={`px-8 py-4 rounded-full font-semibold transition-all shadow-2xl hover:scale-105 ${\n                  isRecording\n                    ? 'bg-red-500 hover:bg-red-600 text-white'\n                    : 'bg-white text-purple-600 hover:bg-gray-100'\n                }`}\n                data-testid=\"toggle-recording-button\"\n              >\n                {isRecording ? (\n                  <span className=\"flex items-center gap-2\">\n                    <MicOff className=\"w-5 h-5\" />\n                    Recording ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç\n                  </span>\n                ) : (\n                  <span className=\"flex items-center gap-2\">\n                    <Mic className=\"w-5 h-5\" />\n                    Recording ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç\n                  </span>\n                )}\n              </button>\n\n              <p className=\"text-xs text-white/70\">\n                Voice-to-voice feature Google Gemini Live API integration ‡§ï‡•á ‡§¨‡§æ‡§¶ available ‡§π‡•ã‡§ó‡§æ\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* History Bottom Sheet with Modern Design */}\n      {showHistory && (\n        <div className=\"fixed inset-0 z-50 bg-black/50 backdrop-blur-md\" onClick={() => setShowHistory(false)} data-testid=\"history-panel\">\n          <div\n            className=\"fixed inset-x-0 bottom-0 bg-white dark:bg-gray-900 rounded-t-3xl max-h-[85vh] overflow-y-auto animate-slide-up shadow-2xl\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Drag Handle Bar */}\n            <div className=\"flex justify-center pt-3 pb-2 sticky top-0 bg-white dark:bg-gray-900 z-10\">\n              <div className=\"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full\" />\n            </div>\n\n            <div className=\"p-6 space-y-4\">\n              <div className=\"flex items-center justify-between mb-4 sticky top-8 bg-white dark:bg-gray-900 py-2 z-10\">\n                <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3\">\n                  <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg\">\n                    <History className=\"w-5 h-5 text-white\" />\n                  </div>\n                  Chat History\n                </h2>\n                <button\n                  onClick={() => {\n                    createNewChat();\n                    setShowHistory(false);\n                  }}\n                  className=\"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-5 py-2.5 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl hover:scale-105\"\n                  data-testid=\"new-chat-button\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  ‡§®‡§à Chat\n                </button>\n              </div>\n\n              {chats.length === 0 ? (\n                <div className=\"text-center py-16\">\n                  <div className=\"w-20 h-20 mx-auto bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center mb-4\">\n                    <MessageSquare className=\"w-10 h-10 text-gray-400\" />\n                  </div>\n                  <p className=\"text-gray-600 dark:text-gray-400 text-lg\">‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à chat ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {chats.map((chat) => (\n                    <div\n                      key={chat.id}\n                      className=\"group relative bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-800/50 rounded-2xl p-4 hover:from-blue-50 hover:to-purple-50 dark:hover:from-blue-900/20 dark:hover:to-purple-900/20 transition-all duration-200 border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-purple-700 hover:shadow-lg\"\n                      data-testid={`chat-${chat.id}`}\n                    >\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <button\n                          onClick={() => {\n                            setCurrentChat(chat);\n                            setMessages(chat.messages || []);\n                            setShowHistory(false);\n                          }}\n                          className=\"flex-1 text-left\"\n                        >\n                          {editingChatId === chat.id ? (\n                            <input\n                              type=\"text\"\n                              value={editingTitle}\n                              onChange={(e) => setEditingTitle(e.target.value)}\n                              onBlur={() => handleRenameChat(chat.id, editingTitle)}\n                              onKeyPress={(e) => e.key === 'Enter' && handleRenameChat(chat.id, editingTitle)}\n                              className=\"w-full px-3 py-2 bg-white dark:bg-gray-900 rounded-xl border-2 border-blue-500 focus:outline-none shadow-inner\"\n                              autoFocus\n                              data-testid={`edit-chat-input-${chat.id}`}\n                            />\n                          ) : (\n                            <>\n                              <p className=\"font-semibold text-gray-900 dark:text-white line-clamp-1 text-lg\">\n                                {chat.title}\n                              </p>\n                              <div className=\"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                                <Clock className=\"w-3 h-3\" />\n                                {new Date(chat.created_at).toLocaleDateString('hi-IN', {\n                                  day: 'numeric',\n                                  month: 'short',\n                                  year: 'numeric'\n                                })}\n                                <span>‚Ä¢</span>\n                                <span>{chat.messages?.length || 0} messages</span>\n                              </div>\n                            </>\n                          )}\n                        </button>\n\n                        <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                          <button\n                            onClick={() => {\n                              setEditingChatId(chat.id);\n                              setEditingTitle(chat.title);\n                            }}\n                            className=\"p-2 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-all hover:scale-110\"\n                            title=\"Rename\"\n                            data-testid={`rename-chat-${chat.id}`}\n                          >\n                            <Edit className=\"w-4 h-4 text-gray-600 dark:text-gray-400\" />\n                          </button>\n                          <button\n                            onClick={() => handleDeleteChat(chat.id)}\n                            className=\"p-2 rounded-xl hover:bg-red-100 dark:hover:bg-red-900/30 transition-all hover:scale-110\"\n                            title=\"Delete\"\n                            data-testid={`delete-chat-${chat.id}`}\n                          >\n                            <Trash2 className=\"w-4 h-4 text-red-600 dark:text-red-400\" />\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Custom Models Modal */}\n      {showCustomModels && (\n        <CustomModelsPanel\n          models={customModels}\n          setModels={setCustomModels}\n          selectedModel={selectedModel}\n          setSelectedModel={setSelectedModel}\n          onClose={() => setShowCustomModels(false)}\n        />\n      )}\n    </div>\n  );\n}\n\n// Custom Models Panel Component\nfunction CustomModelsPanel({ models, setModels, selectedModel, setSelectedModel, onClose }: any) {\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    purpose: '',\n    instructions: '',\n    sources: ''\n  });\n\n  const handleCreate = () => {\n    if (!formData.name.trim()) {\n      toast.error('‡§ï‡•É‡§™‡§Ø‡§æ model ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');\n      return;\n    }\n\n    if (models.length >= 3) {\n      toast.error('Maximum 3 custom models ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§π‡•à');\n      return;\n    }\n\n    const newModel: CustomAIModel = {\n      id: Date.now().toString(),\n      name: formData.name,\n      purpose: formData.purpose,\n      instructions: formData.instructions,\n      sources: formData.sources.split(',').map(s => s.trim()).filter(Boolean),\n      created_at: new Date().toISOString()\n    };\n\n    const updatedModels = [...models, newModel];\n    setModels(updatedModels);\n    localStorage.setItem('customAIModels', JSON.stringify(updatedModels));\n    toast.success('Custom AI model ‡§¨‡§® ‡§ó‡§Ø‡§æ!');\n    setShowCreateForm(false);\n    setFormData({ name: '', purpose: '', instructions: '', sources: '' });\n  };\n\n  const handleDelete = (id: string) => {\n    const updatedModels = models.filter((m: CustomAIModel) => m.id !== id);\n    setModels(updatedModels);\n    localStorage.setItem('customAIModels', JSON.stringify(updatedModels));\n    if (selectedModel === id) {\n      setSelectedModel(null);\n    }\n    toast.success('Model ‡§°‡§ø‡§≤‡•Ä‡§ü ‡§π‡•ã ‡§ó‡§Ø‡§æ');\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-md\" data-testid=\"custom-models-panel\">\n      <div className=\"bg-white dark:bg-gray-900 rounded-3xl max-w-2xl w-full max-h-[85vh] overflow-y-auto shadow-2xl border border-gray-200 dark:border-gray-700\">\n        <div className=\"sticky top-0 bg-gradient-to-r from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 z-10 rounded-t-3xl\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Custom AI Models</h2>\n            <button onClick={onClose} className=\"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-all hover:scale-110\" data-testid=\"close-custom-models\">\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">\n            ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è 3 custom AI models ‡§¨‡§®‡§æ‡§è‡§Ç\n          </p>\n        </div>\n\n        <div className=\"p-6 space-y-4\">\n          {/* Default Model */}\n          <div \n            onClick={() => setSelectedModel(null)}\n            className={`p-5 rounded-2xl border-2 cursor-pointer transition-all hover:scale-[1.02] ${\n              selectedModel === null\n                ? 'border-blue-600 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 shadow-lg'\n                : 'border-gray-200 dark:border-gray-700 hover:border-blue-400 hover:shadow-md'\n            }`}\n            data-testid=\"default-model\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"font-bold text-gray-900 dark:text-white text-lg\">Default AI</h3>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø AI ‡§∏‡§π‡§æ‡§Ø‡§ï</p>\n              </div>\n              {selectedModel === null && (\n                <div className=\"w-7 h-7 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center shadow-lg\">\n                  <Check className=\"w-4 h-4 text-white\" />\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Custom Models */}\n          {models.map((model: CustomAIModel) => (\n            <div \n              key={model.id}\n              onClick={() => setSelectedModel(model.id)}\n              className={`p-5 rounded-2xl border-2 cursor-pointer transition-all relative group hover:scale-[1.02] ${\n                selectedModel === model.id\n                  ? 'border-purple-600 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 shadow-lg'\n                  : 'border-gray-200 dark:border-gray-700 hover:border-purple-400 hover:shadow-md'\n              }`}\n              data-testid={`custom-model-${model.id}`}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <h3 className=\"font-bold text-gray-900 dark:text-white text-lg\">{model.name}</h3>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">{model.purpose}</p>\n                  {model.instructions && (\n                    <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-2 line-clamp-2\">\n                      {model.instructions}\n                    </p>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {selectedModel === model.id && (\n                    <div className=\"w-7 h-7 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center shadow-lg\">\n                      <Check className=\"w-4 h-4 text-white\" />\n                    </div>\n                  )}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleDelete(model.id);\n                    }}\n                    className=\"opacity-0 group-hover:opacity-100 p-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all hover:scale-110\"\n                    data-testid={`delete-model-${model.id}`}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n\n          {/* Create New Button */}\n          {!showCreateForm && models.length < 3 && (\n            <button\n              onClick={() => setShowCreateForm(true)}\n              className=\"w-full p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-2xl hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/10 transition-all hover:scale-[1.02]\"\n              data-testid=\"create-model-button\"\n            >\n              <Plus className=\"w-6 h-6 mx-auto text-gray-400 mb-2\" />\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 font-medium\">Custom Model ‡§¨‡§®‡§æ‡§è‡§Ç</p>\n            </button>\n          )}\n\n          {/* Create Form */}\n          {showCreateForm && (\n            <div className=\"p-6 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-800/50 rounded-2xl space-y-4 border border-gray-200 dark:border-gray-700\" data-testid=\"create-model-form\">\n              <h3 className=\"font-bold text-gray-900 dark:text-white text-lg\">‡§®‡§Ø‡§æ Model ‡§¨‡§®‡§æ‡§è‡§Ç</h3>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Model ‡§ï‡§æ ‡§®‡§æ‡§Æ *\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                  placeholder=\"‡§â‡§¶‡§æ., Study Helper, Exam Coach\"\n                  className=\"w-full px-4 py-3 bg-white dark:bg-gray-900 rounded-xl border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all\"\n                  data-testid=\"model-name-input\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.purpose}\n                  onChange={(e) => setFormData({ ...formData, purpose: e.target.value })}\n                  placeholder=\"‡§Ø‡§π model ‡§ï‡§ø‡§∏ ‡§≤‡§ø‡§è ‡§π‡•à?\"\n                  className=\"w-full px-4 py-3 bg-white dark:bg-gray-900 rounded-xl border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all\"\n                  data-testid=\"model-purpose-input\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂\n                </label>\n                <textarea\n                  value={formData.instructions}\n                  onChange={(e) => setFormData({ ...formData, instructions: e.target.value })}\n                  placeholder=\"‡§Ø‡§π AI ‡§ï‡•à‡§∏‡•á ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞ ‡§ï‡§∞‡•á?\"\n                  rows={3}\n                  className=\"w-full px-4 py-3 bg-white dark:bg-gray-900 rounded-xl border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all\"\n                  data-testid=\"model-instructions-input\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Sources (comma separated)\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.sources}\n                  onChange={(e) => setFormData({ ...formData, sources: e.target.value })}\n                  placeholder=\"‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§®‡§æ‡§Æ, PDFs, websites...\"\n                  className=\"w-full px-4 py-3 bg-white dark:bg-gray-900 rounded-xl border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all\"\n                  data-testid=\"model-sources-input\"\n                />\n              </div>\n\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => setShowCreateForm(false)}\n                  className=\"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-all\"\n                  data-testid=\"cancel-create-model\"\n                >\n                  ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç\n                </button>\n                <button\n                  onClick={handleCreate}\n                  className=\"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-medium hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl\"\n                  data-testid=\"submit-create-model\"\n                >\n                  ‡§¨‡§®‡§æ‡§è‡§Ç\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}